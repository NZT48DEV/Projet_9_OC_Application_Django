{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">

    <h2 class="text-center mb-4">Créer une critique</h2>

    {% include "tickets/partials/_ticket_card.html" with ticket=ticket message="Vous êtes en train de poster en réponse à" %}

    <!-- Bloc critique -->
    <form method="post">
        {% csrf_token %}
        <!-- Champ caché pour la redirection -->
        <input type="hidden" name="next" value="{{ next }}">

        <fieldset class="border p-3">
            <legend class="w-auto">Critique</legend>

            <div class="mb-3">
                {{ review_form.headline.label_tag }}
                {{ review_form.headline }}
            </div>

            <div class="mb-3">
                {{ review_form.rating.label_tag }}
                <div>
                    {% for radio in review_form.rating %}
                        <div class="form-check form-check-inline">
                            {{ radio.tag }}
                            <label class="form-check-label" for="{{ radio.id_for_label }}">
                                {{ radio.choice_label }}
                            </label>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="mb-3">
                {{ review_form.body.label_tag }}
                {{ review_form.body }}
            </div>
            
            <div class="d-flex justify-content-end gap-2">
                <!-- Bouton Annuler -->
                <a href="{{ next|default:'/' }}" class="btn btn-secondary">Annuler</a>
                <!-- Bouton Envoyer -->
                <button type="submit" class="btn btn-success">Envoyer</button>
            </div>
        </fieldset>
    </form>
</div>
{% endblock %}
