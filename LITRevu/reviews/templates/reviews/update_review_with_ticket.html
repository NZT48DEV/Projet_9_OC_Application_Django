{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Modifier le ticket et la critique</h2>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ next }}">  <!-- ✅ Champ caché -->

        <h3>Livre/Article</h3>
        {% include "tickets/partials/_ticket_form.html" with form=ticket_form image_form=image_form ticket=ticket %}

        <hr>

        <h3>Critique</h3>
        {% include "reviews/partials/_review_form.html" with review_form=review_form %}

        <!-- Bloc boutons alignés à droite, empilés verticalement -->
        <div class="d-flex flex-column align-items-end mt-4 gap-2">
            <!-- Bouton enregistrer -->
            <button type="submit" class="btn btn-success w-auto">
                Enregistrer
            </button>

            <!-- Bouton supprimer critique -->
            <button type="submit" name="delete_review" class="btn btn-danger w-auto"
                    onclick="return confirm('Voulez-vous vraiment supprimer uniquement la critique ?');">
                Supprimer la critique
            </button>

            <!-- Bouton supprimer ticket -->
            <button type="submit" name="delete_ticket" class="btn btn-danger w-auto"
                    onclick="return confirm('Voulez-vous vraiment supprimer le ticket ET la critique ?');">
                Supprimer le ticket
            </button>

            <!-- Bouton annuler -->
            <a href="{{ next|default:'/' }}" class="btn btn-secondary w-auto">
                Annuler
            </a>
        </div>
    </form>
</div>
{% endblock %}
